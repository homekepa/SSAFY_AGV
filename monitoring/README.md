# 라즈베리파이 및 Node-red 기반의 모니터링 시스템<br>
![image](https://github.com/lZiinl/SSAFY_AGV/assets/149471946/c04bddd3-7288-400d-8e2c-057d42c55f01)
<br>

## 시스템 개요<br>

### 라즈베리 파이 기반 센서 데이터 측정 및 led 제어
1. 라즈베리 파이5를 사용하여 센스헷, 조도센서, 초음파 센서 3개로 작업 환경 측정 및 장애물 인식<br>
2. 10cm 이내의 장애물을 인식한 경우 센스헷의 LED를 빨간색으로 표시, 없는 경우 초록색으로 표시<br>
3. 장애물 존재 시 AGV를 수동 모드로 전환<br>
4. 조도에 따른 조도에 따른 Light on/off<br>

### Node-red 기반의 모니터링
1. 측정된 센서 데이터를 MQTT를 통해 브로커 서버인 PC로 보내고, PC에서 Node-red로 구성된 UI에 표현<br>
2. 잿슨 나노에 연결된 카메라 정보를 MQTT를 통해 브로커 서버인 PC로 보내고, PC에서 Node-red로 구성된 UI에 표현<br>

### 센서데이터 로깅
1. 라즈베리 파이5의 MQTT 통신으로 센서 데이터를 PC로 전송 및 Node-red에서 CSV로 로깅<br>
2. 라즈베리 파이5에서 Firebase로 데이터를 보내 센서를 시간 순서로 로깅<br>

## 시스템 Block Diagram<br>
![그림4](https://github.com/lZiinl/SSAFY_AGV/assets/149471946/44434e31-8cba-4582-9bea-c74398fed620)
<br>

## MQTT 사용 이유<br>
통신 환경등에 영향이 없이 안정적인 연결을 수립 할 수 있기 때문 -> 사업장 내부의 불안정한 네트워크 환경<br>
기기간 연결을 직접 설정 가능해서<br>
QoS를 통해 메세지가 제대로 전송되지 않은경우 주기적으로 재전송 가능해서<br>
저전력 환경에서 사용가능하고 패킷크기가 작아 오버헤드가 적어 라즈베리 파이에 적합하다고 판단<br>
메세지 브로커는 Mosquitto 활용<br>

## 중요사항
1.라즈베리 파이5와 센스헷 그리고 초음파와 조도 센서를 결선해야는데 라즈베리 파이5와 센스헷이 사용하는 핀을 피해서 센서를 연결해야함<br>
=> 라즈베리 파이 5의 Pin out과 센스헷의 Schematic을 확인해 센서를 결선할 포트 결정<br>

![image](https://github.com/lZiinl/SSAFY_AGV/assets/149471946/a3679788-b200-4723-989b-57fc4263da41)
